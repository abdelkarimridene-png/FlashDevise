<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terminal V7</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <style>
        body { background: #05070a; color: white; font-family: sans-serif; }
        .panel { background: #0f141c; border: 1px solid #1e293b; border-radius: 20px; }
        .btn-off { opacity: 0.15; filter: grayscale(1); pointer-events: none; transform: scale(0.95); }
        .btn-on { opacity: 1; filter: grayscale(0); pointer-events: auto; transform: scale(1); border: 2px solid #6366f1; }
        .chip { width: 24px; height: 24px; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-weight: 900; margin-right: 12px; }
    </style>
</head>
<body class="p-4 md:p-10">

    <div class="max-w-md mx-auto">
        <div class="text-[9px] text-center opacity-20 mb-4 uppercase tracking-[0.5em]">HARDWARE_SYNC_V7</div>
        
        <div class="panel p-6 shadow-2xl mb-6">
            <h1 class="text-center font-black italic mb-8 uppercase text-xl">FLASH<span class="text-indigo-500">DEVISE</span></h1>

            <input type="number" id="inp-amount" value="1000" class="w-full bg-black/40 border border-white/10 p-4 rounded-xl text-3xl font-bold text-center outline-none mb-4">
            
            <div class="grid grid-cols-2 gap-3 mb-6">
                <select id="sel-from" class="bg-slate-800 p-4 rounded-xl border-none font-bold"></select>
                <select id="sel-to" class="bg-slate-800 p-4 rounded-xl border-none font-bold"></select>
            </div>

            <div class="text-center py-6 border-y border-white/5 mb-6">
                <div id="display-res" class="text-4xl font-black text-indigo-400">---</div>
                <div id="display-rate" class="text-[10px] opacity-30 mt-2 font-bold uppercase">Calcul...</div>
            </div>

            <div class="space-y-3">
                <a id="btn-wise" href="https://wise.com" target="_blank" class="flex items-center justify-center w-full py-4 bg-white text-black rounded-xl font-black text-[10px] uppercase transition-all btn-on">
                    <span class="chip bg-[#00B9FF] text-white">W</span> VERS MON COMPTE WISE
                </a>
                
                <a id="btn-binance" href="https://www.binance.com" target="_blank" class="flex items-center justify-center w-full py-4 bg-white text-black rounded-xl font-black text-[10px] uppercase transition-all btn-off">
                    <span class="chip bg-[#F3BA2F] text-black">B</span> VÉRIFIER SUR BINANCE
                </a>

                <a id="btn-revolut" href="https://www.revolut.com" target="_blank" class="flex items-center justify-center w-full py-4 bg-white text-black rounded-xl font-black text-[10px] uppercase transition-all btn-off">
                    <span class="chip bg-black text-white border border-gray-200">R</span> INVESTIR VIA REVOLUT
                </a>
            </div>
        </div>

        <div class="panel h-64 overflow-hidden shadow-2xl">
            <div id="chart-area" class="h-full w-full"></div>
        </div>
    </div>

    <script>
        const list = ["EUR", "USD", "GBP", "CHF", "BTC", "ETH", "XAU"];

        function syncButtons(to) {
            const bW = document.getElementById('btn-wise');
            const bB = document.getElementById('btn-binance');
            const bR = document.getElementById('btn-revolut');

            // On éteint tout
            [bW, bB, bR].forEach(btn => {
                btn.classList.remove('btn-on');
                btn.classList.add('btn-off');
            });

            // On allume le bon
            if (["BTC", "ETH"].includes(to)) {
                bB.classList.add('btn-on'); bB.classList.remove('btn-off');
            } else if (to === "XAU") {
                bR.classList.add('btn-on'); bR.classList.remove('btn-off');
            } else {
                bW.classList.add('btn-on'); bW.classList.remove('btn-off');
            }
        }

        async function start() {
            const a = document.getElementById('inp-amount').value;
            const f = document.getElementById('sel-from').value;
            const t = document.getElementById('sel-to').value;
            syncButtons(t);

            try {
                const r = await fetch(`https://api.exchangerate-api.com/v4/latest/${f}`);
                const d = await r.json();
                const rate = d.rates[t];
                document.getElementById('display-res').innerText = (a * rate).toLocaleString(undefined, {maximumFractionDigits:2}) + " " + t;
                document.getElementById('display-rate').innerText = `1 ${f} = ${rate.toFixed(4)} ${t}`;
                
                document.getElementById('chart-area').innerHTML = '<div id="tv_ctx" class="h-full"></div>';
                new TradingView.widget({
                    "autosize": true, "symbol": `${f}${t}`, "interval": "D", "theme": "dark",
                    "container_id": "tv_ctx", "style": "3", "backgroundColor": "#05070a", "hide_top_toolbar": true
                });
            } catch(e) {}
        }

        window.onload = function() {
            const s1 = document.getElementById('sel-from'), s2 = document.getElementById('sel-to');
            list.forEach(c => { s1.add(new Option(c, c)); s2.add(new Option(c, c)); });
            s1.value = "EUR"; s2.value = "USD";
            [s1, s2, document.getElementById('inp-amount')].forEach(el => el.onchange = start);
            start();
        }
    </script>
</body>
</html>
