<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terminal de Marché</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #05070a; color: white; font-family: sans-serif; }
        .card { background: #0f141c; border: 1px solid #1e293b; border-radius: 1rem; overflow: hidden; }
        .widget-title { font-size: 11px; font-weight: 800; color: #6366f1; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 15px; }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-7xl mx-auto space-y-6">
        
        <div class="card p-6 border-l-4 border-indigo-500">
            <div class="flex flex-col md:flex-row gap-6 items-center">
                <div class="flex-1">
                    <h1 class="font-black italic text-2xl uppercase mb-2">FLASH<span class="text-indigo-500">DEVISE</span></h1>
                    <p class="text-[10px] opacity-40 uppercase font-bold tracking-[0.3em]">Institutional Terminal v8.0</p>
                </div>
                <div class="flex gap-4">
                    <select id="from" class="bg-slate-800 p-4 rounded-xl font-bold border-none outline-none text-white"></select>
                    <select id="to" class="bg-slate-800 p-4 rounded-xl font-bold border-none outline-none text-white"></select>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            
            <div class="card p-6">
                <div class="widget-title">Analyse du Sentiment</div>
                <div class="tradingview-widget-container" id="tech-widget">
                    </div>
            </div>

            <div class="lg:col-span-2 card p-6">
                <div class="widget-title">Flux Actualités (Reuters & Bloomberg)</div>
                <div class="tradingview-widget-container" id="news-widget">
                    </div>
            </div>

            <div class="lg:col-span-3 card p-2 h-[500px]">
                <div class="tradingview-widget-container h-full" id="chart-widget">
                    </div>
            </div>
        </div>
    </div>

    <script>
        const assets = ["EUR", "USD", "GBP", "CHF", "BTC", "ETH", "XAU"];

        function loadAllWidgets(f, t) {
            const pair = (f + t).toUpperCase();

            // 1. TECHNIQUE
            const techBox = document.getElementById('tech-widget');
            techBox.innerHTML = '';
            const s1 = document.createElement('script');
            s1.src = "https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js";
            s1.async = true;
            s1.innerHTML = JSON.stringify({
                "interval": "1D", "width": "100%", "isTransparent": true, "height": "350",
                "symbol": "FX_IDC:"+pair, "showIntervalTabs": true, "locale": "fr", "colorTheme": "dark"
            });
            techBox.appendChild(s1);

            // 2. NEWS
            const newsBox = document.getElementById('news-widget');
            newsBox.innerHTML = '';
            const s2 = document.createElement('script');
            s2.src = "https://s3.tradingview.com/external-embedding/embed-widget-timeline.js";
            s2.async = true;
            s2.innerHTML = JSON.stringify({
                "feedMode": "all_symbols", "colorTheme": "dark", "isTransparent": true,
                "displayMode": "regular", "width": "100%", "height": "350", "locale": "fr"
            });
            newsBox.appendChild(s2);

            // 3. CHART
            const chartBox = document.getElementById('chart-widget');
            chartBox.innerHTML = '';
            const s3 = document.createElement('script');
            s3.src = "https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js";
            s3.async = true;
            s3.innerHTML = JSON.stringify({
                "symbol": "FX_IDC:"+pair, "width": "100%", "height": "100%", "locale": "fr",
                "dateRange": "12M", "colorTheme": "dark", "trendLineColor": "#37a6ef",
                "underLineColor": "rgba(55, 166, 239, 0.15)", "isTransparent": true, "autosize": true
            });
            chartBox.appendChild(s3);
        }

        window.onload = function() {
            const sf = document.getElementById('from'), st = document.getElementById('to');
            assets.forEach(a => { sf.add(new Option(a, a)); st.add(new Option(a, a)); });
            sf.value = "EUR"; st.value = "USD";
            
            const run = () => loadAllWidgets(sf.value, st.value);
            [sf, st].forEach(el => el.onchange = run);
            run();
        }
    </script>
</body>
</html>
